@model IEnumerable<OpenThrone.Web.Models.Stall>

@{
    Layout = null;
}

<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js"></script>
    <script>window.jQuery || document.write('<script src="@Url.Content("~/Content/scripts/jquery-1.6.4.min.js")">\x3C/script>')</script>
    <script src="http://ajax.aspnetcdn.com/ajax/signalr/jquery.signalr-2.2.0.min.js"></script>
    <script>$.signalR || document.write('<script src="@Url.Content("~/Content/scripts/jquery.signalR-2.2.0.min.js")">\x3C/script>')</script>
    <script src="~/signalr/hubs"></script>
    <script type="text/javascript">
        $(function() {
            var notificationhub = $.connection.notificationHub;
            notificationhub.client.stallAvailabilityChange = function(stall) {
                $("#stall-" + stall.Id + "-availability").text(stall.Available ? "available" : "unavailable");
            };
            $.connection.hub.start();
        });
    </script>
    <title>Index</title>
</head>
<body>
    <div>
        <ul>
            @foreach (var stall in Model)
            {
                <li>Stall @stall.Id is <span id="stall-@stall.Id-availability">@(stall.Available ? "available" : "unavailable")</span></li>
            }
        </ul>
    </div>
</body>
</html>
